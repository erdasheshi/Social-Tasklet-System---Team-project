version: '2'
services:

  mongodb:
    build: Database/
    ports:
      - "27017:27017"

  sf-broker:
    build: SFBroker/
    ports:
      - "8001:8001"
    depends_on:
      - mongodb

  broker:
    build: Broker/
    ports:
      - "8003:8003"
    depends_on:
      - sf-broker

  client1:
    build: Client/
    ports:
      - "8080:8080"
    command: node server.js albrinkm 8080
    depends_on:
      - broker

  client2:
    build: Client/
    ports:
      - "8081:8081"
    command: node server.js dhelfer 8081
    depends_on:
      - broker

  frontend:
    build: Frontend/
    ports:
      - "4200:80"
    depends_on:
      - client1
      - client2